!function(t,e){var n=function(n,i){this.elem=n,this.$elem=t(n),this.options=i,this.metadata=this.$elem.data("stickem-options"),this.$win=t(e)};n.prototype={defaults:{item:".stickem",container:".stickem-container",stickClass:"stickit",endStickClass:"stickit-end",offset:0,start:0,onStick:null,onUnstick:null},init:function(){var e=this;return e.config=t.extend({},e.defaults,e.options,e.metadata),e.setWindowHeight(),e.getItems(),e.bindEvents(),e},bindEvents:function(){var e=this;e.$win.on("scroll.stickem",t.proxy(e.handleScroll,e)),e.$win.on("resize.stickem",t.proxy(e.handleResize,e))},destroy:function(){var t=this;t.$win.off("scroll.stickem"),t.$win.off("resize.stickem")},getItem:function(e,n){var i=this,o=t(n),r={$elem:o,elemHeight:o.height(),$container:o.parents(i.config.container),isStuck:!1};i.windowHeight>r.elemHeight?(r.containerHeight=r.$container.outerHeight(),r.containerInner={border:{bottom:parseInt(r.$container.css("border-bottom"),10)||0,top:parseInt(r.$container.css("border-top"),10)||0},padding:{bottom:parseInt(r.$container.css("padding-bottom"),10)||0,top:parseInt(r.$container.css("padding-top"),10)||0}},r.containerInnerHeight=r.$container.height(),r.containerStart=r.$container.offset().top-i.config.offset+i.config.start+r.containerInner.padding.top+r.containerInner.border.top,r.scrollFinish=r.containerStart-i.config.start+(r.containerInnerHeight-r.elemHeight),r.containerInnerHeight>r.elemHeight&&i.items.push(r)):r.$elem.removeClass(i.config.stickClass+" "+i.config.endStickClass)},getItems:function(){var e=this;e.items=[],e.$elem.find(e.config.item).each(t.proxy(e.getItem,e))},handleResize:function(){var t=this;t.getItems(),t.setWindowHeight()},handleScroll:function(){var t=this;if(t.items.length>0)for(var e=t.$win.scrollTop(),n=0,i=t.items.length;i>n;n++){var o=t.items[n];o.isStuck&&(e<o.containerStart||e>o.scrollFinish)?(o.$elem.removeClass(t.config.stickClass),e>o.scrollFinish&&o.$elem.addClass(t.config.endStickClass),o.isStuck=!1,t.config.onUnstick&&t.config.onUnstick(o)):o.isStuck===!1&&e>o.containerStart&&e<o.scrollFinish&&(o.$elem.removeClass(t.config.endStickClass).addClass(t.config.stickClass),o.isStuck=!0,t.config.onStick&&t.config.onStick(o))}},setWindowHeight:function(){var t=this;t.windowHeight=t.$win.height()-t.config.offset}},n.defaults=n.prototype.defaults,t.fn.stickem=function(t){return this.destroy=function(){this.each(function(){new n(this,t).destroy()})},this.each(function(){new n(this,t).init()})}}(jQuery,window,document);